<!--4/3/2025 Elizabeth Li-->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Structure Viewer</title>
        <script src="https://unpkg.com/vtk.js"></script>
        <style> 
            body {
                font-family: Arial, sans-serif; 
                background-color: black;
                color: white;
            }
            #vtk-container {
                width: 80%;
                min-height: 600px;
                border: 2px solid white; /* white border around visualization box */
                pointer-events: auto;
                position: relative;
                z-index: 1000;
            }
        </style>
    </head>
    <body>
        <h2>Upload a brain file (.vtp)</h2>

        <form method="post" enctype="multipart/form-data">
            <input type="file" name="file" accept=".vtp" id="fileInput">
        </form>

        <!--if a file has been uploaded, display the file name-->
        {% if filename %}
            <h2>Uploaded file: {{ filename }}</h2>
            <!--functionality for users to input their ratings-->
            <div style="margin-top:20px;">
                <input type="number" id="rating" min="1" max="10" placeholder="Rate 1-10">
                <button onclick="submitRating('{{filename}}')">Submit rating</button>
            </div>
            <!--vtk container-->
            <div id="vtk-container"></div> 
            
            <script>
                window.filename="{{filename}}";
            </script>

                <!-- Debugging: Check if the vtk-container is receiving mouse events -->
            <script>
                document.getElementById('vtk-container').addEventListener('click', () => {
                    console.log("vtk-container clicked");
                });
            </script>
        {% endif %}

        <!--link to external javascript file that handles client-side functionality-->
        <script src="{{url_for('static', filename='js/main.js')}}"></script>
    </body>
</html>
